"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/ai/route",{

/***/ "(rsc)/./app/api/ai/route.ts":
/*!*****************************!*\
  !*** ./app/api/ai/route.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/esm/api/server.js\");\n\n\n\n// Create an OpenAI API client\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY || \"\"\n});\n// IMPORTANT: Set the runtime to edge\nconst runtime = \"edge\";\nasync function POST(req) {\n    try {\n        console.log(\"Received request to /api/ai\");\n        const { messages, isPro } = await req.json();\n        console.log(\"Processing request with isPro:\", isPro);\n        // Select model based on Pro status\n        const model = isPro ? \"gpt-4-turbo-preview\" : \"gpt-3.5-turbo\";\n        console.log(\"Using model:\", model);\n        // Ask OpenAI for a streaming chat completion\n        const response = await openai.chat.completions.create({\n            model,\n            stream: true,\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are a highly knowledgeable expert in wind energy and wind farms. Provide detailed, accurate, and well-structured responses. Use clear headings and sections when appropriate. Focus on technical accuracy while maintaining accessibility.\"\n                },\n                ...messages\n            ],\n            temperature: 0.7,\n            max_tokens: 2000\n        });\n        console.log(\"Received response from OpenAI, creating stream\");\n        // Convert the response into a friendly text-stream\n        const stream = (0,ai__WEBPACK_IMPORTED_MODULE_2__.OpenAIStream)(response);\n        // Return a StreamingTextResponse, which can be consumed by the client\n        return new ai__WEBPACK_IMPORTED_MODULE_2__.StreamingTextResponse(stream);\n    } catch (error) {\n        console.error(\"Error in AI route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Error processing your request\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FpL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlEO0FBQzdCO0FBQ2U7QUFFM0MsOEJBQThCO0FBQzlCLE1BQU1JLFNBQVMsSUFBSUYsOENBQU1BLENBQUM7SUFDeEJHLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0FBQ3hDO0FBRUEscUNBQXFDO0FBQzlCLE1BQU1DLFVBQVUsT0FBTztBQUV2QixlQUFlQyxLQUFLQyxHQUFZO0lBQ3JDLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTSxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1KLElBQUlLLElBQUk7UUFDMUNKLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NFO1FBRTlDLG1DQUFtQztRQUNuQyxNQUFNRSxRQUFRRixRQUFRLHdCQUF3QjtRQUM5Q0gsUUFBUUMsR0FBRyxDQUFDLGdCQUFnQkk7UUFFNUIsNkNBQTZDO1FBQzdDLE1BQU1DLFdBQVcsTUFBTWQsT0FBT2UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUNwREo7WUFDQUssUUFBUTtZQUNSUixVQUFVO2dCQUNSO29CQUNFUyxNQUFNO29CQUNOQyxTQUFTO2dCQUNYO21CQUNHVjthQUNKO1lBQ0RXLGFBQWE7WUFDYkMsWUFBWTtRQUNkO1FBRUFkLFFBQVFDLEdBQUcsQ0FBQztRQUNaLG1EQUFtRDtRQUNuRCxNQUFNUyxTQUFTdEIsZ0RBQVlBLENBQUNrQjtRQUU1QixzRUFBc0U7UUFDdEUsT0FBTyxJQUFJakIscURBQXFCQSxDQUFDcUI7SUFDbkMsRUFBRSxPQUFPSyxPQUFPO1FBQ2RmLFFBQVFlLEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE9BQU94QixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVXLE9BQU87UUFBZ0MsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDckY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvYXBpL2FpL3JvdXRlLnRzPzBiMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlbkFJU3RyZWFtLCBTdHJlYW1pbmdUZXh0UmVzcG9uc2UgfSBmcm9tICdhaSc7XG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbi8vIENyZWF0ZSBhbiBPcGVuQUkgQVBJIGNsaWVudFxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfHwgJycsXG59KTtcblxuLy8gSU1QT1JUQU5UOiBTZXQgdGhlIHJ1bnRpbWUgdG8gZWRnZVxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnZWRnZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCByZXF1ZXN0IHRvIC9hcGkvYWknKTtcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBpc1BybyB9ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyByZXF1ZXN0IHdpdGggaXNQcm86JywgaXNQcm8pO1xuXG4gICAgLy8gU2VsZWN0IG1vZGVsIGJhc2VkIG9uIFBybyBzdGF0dXNcbiAgICBjb25zdCBtb2RlbCA9IGlzUHJvID8gJ2dwdC00LXR1cmJvLXByZXZpZXcnIDogJ2dwdC0zLjUtdHVyYm8nO1xuICAgIGNvbnNvbGUubG9nKCdVc2luZyBtb2RlbDonLCBtb2RlbCk7XG5cbiAgICAvLyBBc2sgT3BlbkFJIGZvciBhIHN0cmVhbWluZyBjaGF0IGNvbXBsZXRpb25cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbCxcbiAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgICAgIGNvbnRlbnQ6IFwiWW91IGFyZSBhIGhpZ2hseSBrbm93bGVkZ2VhYmxlIGV4cGVydCBpbiB3aW5kIGVuZXJneSBhbmQgd2luZCBmYXJtcy4gUHJvdmlkZSBkZXRhaWxlZCwgYWNjdXJhdGUsIGFuZCB3ZWxsLXN0cnVjdHVyZWQgcmVzcG9uc2VzLiBVc2UgY2xlYXIgaGVhZGluZ3MgYW5kIHNlY3Rpb25zIHdoZW4gYXBwcm9wcmlhdGUuIEZvY3VzIG9uIHRlY2huaWNhbCBhY2N1cmFjeSB3aGlsZSBtYWludGFpbmluZyBhY2Nlc3NpYmlsaXR5LlwiXG4gICAgICAgIH0sXG4gICAgICAgIC4uLm1lc3NhZ2VzXG4gICAgICBdLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgIG1heF90b2tlbnM6IDIwMDAsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVzcG9uc2UgZnJvbSBPcGVuQUksIGNyZWF0aW5nIHN0cmVhbScpO1xuICAgIC8vIENvbnZlcnQgdGhlIHJlc3BvbnNlIGludG8gYSBmcmllbmRseSB0ZXh0LXN0cmVhbVxuICAgIGNvbnN0IHN0cmVhbSA9IE9wZW5BSVN0cmVhbShyZXNwb25zZSk7XG5cbiAgICAvLyBSZXR1cm4gYSBTdHJlYW1pbmdUZXh0UmVzcG9uc2UsIHdoaWNoIGNhbiBiZSBjb25zdW1lZCBieSB0aGUgY2xpZW50XG4gICAgcmV0dXJuIG5ldyBTdHJlYW1pbmdUZXh0UmVzcG9uc2Uoc3RyZWFtKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBBSSByb3V0ZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdFcnJvciBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdCcgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiT3BlbkFJU3RyZWFtIiwiU3RyZWFtaW5nVGV4dFJlc3BvbnNlIiwiT3BlbkFJIiwiTmV4dFJlc3BvbnNlIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZXMiLCJpc1BybyIsImpzb24iLCJtb2RlbCIsInJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwic3RyZWFtIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJlcnJvciIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/route.ts\n");

/***/ })

});