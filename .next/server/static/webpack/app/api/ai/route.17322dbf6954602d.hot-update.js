"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/ai/route",{

/***/ "(rsc)/./app/api/ai/route.ts":
/*!*****************************!*\
  !*** ./app/api/ai/route.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/esm/api/server.js\");\n\n\n\n// Create an OpenAI API client\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY || \"\"\n});\n// IMPORTANT: Set the runtime to edge\nconst runtime = \"edge\";\nasync function POST(req) {\n    try {\n        console.log(\"Received request to /api/ai\");\n        const { messages } = await req.json();\n        // Always use GPT-4o for wind energy expertise\n        const model = \"gpt-4o\";\n        console.log(\"Using model:\", model);\n        // Ask OpenAI for a streaming chat completion\n        const response = await openai.chat.completions.create({\n            model,\n            stream: true,\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are a highly knowledgeable expert in wind energy and wind farms. Provide detailed, accurate, and well-structured responses. Use clear headings and sections when appropriate. Focus on technical accuracy while maintaining accessibility.\"\n                },\n                ...messages\n            ],\n            temperature: 0.7,\n            max_tokens: 2000\n        });\n        // Convert the response into a friendly text-stream\n        const stream = (0,ai__WEBPACK_IMPORTED_MODULE_2__.OpenAIStream)(response, {\n            onStart: ()=>{\n                console.log(\"Stream started\");\n            },\n            onToken: (token)=>{\n                console.log(\"Token received:\", token);\n            },\n            onCompletion: (completion)=>{\n                console.log(\"Stream completed\");\n            }\n        });\n        // Return a StreamingTextResponse, which can be consumed by the client\n        return new ai__WEBPACK_IMPORTED_MODULE_2__.StreamingTextResponse(stream);\n    } catch (error) {\n        console.error(\"Error in AI route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Error processing your request\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FpL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlEO0FBQzdCO0FBQ2U7QUFFM0MsOEJBQThCO0FBQzlCLE1BQU1JLFNBQVMsSUFBSUYsOENBQU1BLENBQUM7SUFDeEJHLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0FBQ3hDO0FBRUEscUNBQXFDO0FBQzlCLE1BQU1DLFVBQVUsT0FBTztBQUV2QixlQUFlQyxLQUFLQyxHQUFZO0lBQ3JDLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBRyxNQUFNSCxJQUFJSSxJQUFJO1FBRW5DLDhDQUE4QztRQUM5QyxNQUFNQyxRQUFRO1FBQ2RKLFFBQVFDLEdBQUcsQ0FBQyxnQkFBZ0JHO1FBRTVCLDZDQUE2QztRQUM3QyxNQUFNQyxXQUFXLE1BQU1iLE9BQU9jLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxNQUFNLENBQUM7WUFDcERKO1lBQ0FLLFFBQVE7WUFDUlAsVUFBVTtnQkFDUjtvQkFDRVEsTUFBTTtvQkFDTkMsU0FBUztnQkFDWDttQkFDR1Q7YUFDSjtZQUNEVSxhQUFhO1lBQ2JDLFlBQVk7UUFDZDtRQUVBLG1EQUFtRDtRQUNuRCxNQUFNSixTQUFTckIsZ0RBQVlBLENBQUNpQixVQUFVO1lBQ3BDUyxTQUFTO2dCQUNQZCxRQUFRQyxHQUFHLENBQUM7WUFDZDtZQUNBYyxTQUFTLENBQUNDO2dCQUNSaEIsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQmU7WUFDakM7WUFDQUMsY0FBYyxDQUFDQztnQkFDYmxCLFFBQVFDLEdBQUcsQ0FBQztZQUNkO1FBQ0Y7UUFFQSxzRUFBc0U7UUFDdEUsT0FBTyxJQUFJWixxREFBcUJBLENBQUNvQjtJQUNuQyxFQUFFLE9BQU9VLE9BQU87UUFDZG5CLFFBQVFtQixLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPNUIscURBQVlBLENBQUNZLElBQUksQ0FBQztZQUFFZ0IsT0FBTztRQUFnQyxHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNyRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FwcC9hcGkvYWkvcm91dGUudHM/MGIyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuQUlTdHJlYW0sIFN0cmVhbWluZ1RleHRSZXNwb25zZSB9IGZyb20gJ2FpJztcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuLy8gQ3JlYXRlIGFuIE9wZW5BSSBBUEkgY2xpZW50XG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCAnJyxcbn0pO1xuXG4vLyBJTVBPUlRBTlQ6IFNldCB0aGUgcnVudGltZSB0byBlZGdlXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdlZGdlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHJlcXVlc3QgdG8gL2FwaS9haScpO1xuICAgIGNvbnN0IHsgbWVzc2FnZXMgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG5cbiAgICAvLyBBbHdheXMgdXNlIEdQVC00byBmb3Igd2luZCBlbmVyZ3kgZXhwZXJ0aXNlXG4gICAgY29uc3QgbW9kZWwgPSAnZ3B0LTRvJztcbiAgICBjb25zb2xlLmxvZygnVXNpbmcgbW9kZWw6JywgbW9kZWwpO1xuXG4gICAgLy8gQXNrIE9wZW5BSSBmb3IgYSBzdHJlYW1pbmcgY2hhdCBjb21wbGV0aW9uXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWwsXG4gICAgICBzdHJlYW06IHRydWUsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICBjb250ZW50OiBcIllvdSBhcmUgYSBoaWdobHkga25vd2xlZGdlYWJsZSBleHBlcnQgaW4gd2luZCBlbmVyZ3kgYW5kIHdpbmQgZmFybXMuIFByb3ZpZGUgZGV0YWlsZWQsIGFjY3VyYXRlLCBhbmQgd2VsbC1zdHJ1Y3R1cmVkIHJlc3BvbnNlcy4gVXNlIGNsZWFyIGhlYWRpbmdzIGFuZCBzZWN0aW9ucyB3aGVuIGFwcHJvcHJpYXRlLiBGb2N1cyBvbiB0ZWNobmljYWwgYWNjdXJhY3kgd2hpbGUgbWFpbnRhaW5pbmcgYWNjZXNzaWJpbGl0eS5cIlxuICAgICAgICB9LFxuICAgICAgICAuLi5tZXNzYWdlc1xuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICBtYXhfdG9rZW5zOiAyMDAwLFxuICAgIH0pO1xuXG4gICAgLy8gQ29udmVydCB0aGUgcmVzcG9uc2UgaW50byBhIGZyaWVuZGx5IHRleHQtc3RyZWFtXG4gICAgY29uc3Qgc3RyZWFtID0gT3BlbkFJU3RyZWFtKHJlc3BvbnNlLCB7XG4gICAgICBvblN0YXJ0OiAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTdHJlYW0gc3RhcnRlZCcpO1xuICAgICAgfSxcbiAgICAgIG9uVG9rZW46ICh0b2tlbikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gcmVjZWl2ZWQ6JywgdG9rZW4pO1xuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGlvbjogKGNvbXBsZXRpb24pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N0cmVhbSBjb21wbGV0ZWQnKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBSZXR1cm4gYSBTdHJlYW1pbmdUZXh0UmVzcG9uc2UsIHdoaWNoIGNhbiBiZSBjb25zdW1lZCBieSB0aGUgY2xpZW50XG4gICAgcmV0dXJuIG5ldyBTdHJlYW1pbmdUZXh0UmVzcG9uc2Uoc3RyZWFtKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBBSSByb3V0ZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdFcnJvciBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdCcgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiT3BlbkFJU3RyZWFtIiwiU3RyZWFtaW5nVGV4dFJlc3BvbnNlIiwiT3BlbkFJIiwiTmV4dFJlc3BvbnNlIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZXMiLCJqc29uIiwibW9kZWwiLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsInN0cmVhbSIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwib25TdGFydCIsIm9uVG9rZW4iLCJ0b2tlbiIsIm9uQ29tcGxldGlvbiIsImNvbXBsZXRpb24iLCJlcnJvciIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/route.ts\n");

/***/ })

});